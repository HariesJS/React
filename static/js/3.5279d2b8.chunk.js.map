{"version":3,"sources":["../node_modules/reselect/es/index.js","components/users/usersSelectors.js","paginator/paginator.jsx","components/users/Users.jsx"],"names":["defaultEqualityCheck","a","b","areArgumentsShallowlyEqual","equalityCheck","prev","next","length","i","getDependencies","funcs","dependencies","Array","isArray","every","dep","dependencyTypes","map","join","Error","createSelector","memoize","_len","arguments","memoizeOptions","_key","_len2","_key2","recomputations","resultFunc","pop","memoizedResultFunc","apply","undefined","concat","selector","params","push","resetRecomputations","createSelectorCreator","func","lastArgs","lastResult","getUsers","state","usersPage","users","filter","Paginator","totalCount","currentPage","changePage","color","useSelector","theme","useState","port","setPort","useEffect","setWidth","window","innerWidth","addEventListener","removeEventListener","pages","portCount","Math","ceil","portSize","portion","setPortion","left","right","onClick","style","borderColor","className","e","backgroundColor","updatePage","key","Users","dispatch","useDispatch","isDisabled","isLoad","data","auth","loadUsers","useCallback","page","getUsersThunk","id","name","align","to","src","photos","large","alt","width","followed","disabled","some","unfollow","follow"],"mappings":"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","file":"static/js/3.5279d2b8.chunk.js","sourcesContent":["function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  } // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n\n\n  var length = prev.length;\n\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n  var lastArgs = null;\n  var lastResult = null; // we reference arguments instead of spreading them for performance reasons\n\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++; // apply arguments instead of spreading for performance.\n\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions)); // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      } // apply arguments instead of spreading for performance.\n\n\n      return memoizedResultFunc.apply(null, params);\n    });\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n\n    selector.recomputations = function () {\n      return recomputations;\n    };\n\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n\n    return selector;\n  };\n}\nexport var createSelector = createSelectorCreator(defaultMemoize);\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","import { createSelector } from 'reselect';\n\nconst getUsersSelector = state => {\n    return state.usersPage.users;\n}\n\nexport const getUsers = createSelector(getUsersSelector, users => {\n    return users.filter(() => true);\n});","import React, { useEffect, Fragment, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport '../App.css';\n\nconst Paginator = ({ totalCount, currentPage, changePage }) => {\n    const color = useSelector(state => state.theme.color);\n    const [port, setPort] = useState(10);\n\n    useEffect(() => {\n        if (window.innerWidth < 500) {\n            setWidth();\n        }\n        function setWidth() {\n            if (window.innerWidth < 500) {\n                setPort(5);\n            } else {\n                setPort(10);\n            }\n        }\n        window.addEventListener('resize', setWidth);\n        return () => window.removeEventListener('resize', setWidth);\n    }, []);\n\n    const pages = [];\n\n    const portCount = Math.ceil(totalCount / 30);\n\n    for (let i = 1; i <= portCount; i++) {\n        pages.push(i);\n    }\n\n    const portSize = Math.ceil(portCount / port);\n    \n    const [portion, setPortion] = useState(1);\n    const left = (portion - 1) * port + 1;\n    const right = portion * port;\n    \n    const updatePage = e => {\n        if (e !== currentPage) {\n            changePage(e);\n        }\n    }\n    return (\n        <Fragment>\n            <div>{\n                portion > 1 && <span onClick={() => setPortion(portion - 1)} style={{ borderColor: color }} className='paginator'>{'<'}</span>\n            }{\n                pages.filter(e => e >= left && e <= right).map(e => (\n                    <div style={{ borderColor: color }, currentPage === e ? { backgroundColor: color, borderColor: color } : { borderColor: color }} className={currentPage === e ? 'paginator-active' : 'paginator'} onClick={() => updatePage(e)} key={e}>\n                        <span>{e}</span>\n                    </div>\n                ))\n            }{\n                portion < portSize && <span onClick={() => setPortion(portion + 1)} style={{ borderColor: color }} className='paginator'>{'>'}</span>\n            }</div>\n        </Fragment>\n    )\n}\n\nexport default Paginator;","import React, { useEffect, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport '../../App.css';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getUsersThunk, follow, unfollow } from '../../redux/reducers/usersReducer/usersReducer';\nimport { getUsers } from './usersSelectors';\nimport Paginator from '../../paginator/paginator';\n\nconst Users = () => {\n    const dispatch = useDispatch();\n    const users = useSelector(state => getUsers(state));\n    const isDisabled = useSelector(state => state.usersPage.isDisabled);\n    const isLoad = useSelector(state => state.usersPage.isLoad);\n    const totalCount = useSelector(state => state.usersPage.totalCount);\n    const currentPage = useSelector(state => state.usersPage.currentPage);\n    const color = useSelector(state => state.theme.color);\n    const data = useSelector(state => state.auth.data);\n\n    const loadUsers = useCallback(page => dispatch(getUsersThunk(page)), [getUsersThunk])\n\n\n    useEffect(() => {\n        loadUsers();\n    }, []);\n\n    const changePage = page => {\n        loadUsers(page);\n    }\n\n    const userImage = 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/User_icon_2.svg/220px-User_icon_2.svg.png';\n    return (\n        <div className='users-wrapper'>\n            <span className='users-title'>All users of this site</span>\n            <Paginator totalCount={totalCount} currentPage={currentPage} changePage={changePage} />\n            {isLoad\n            ? <div className='users-loader'>LOADING...</div>\n            : <div className='parrent-block'>{\n                users.map(e => (\n                    <div style={{ backgroundColor: color }} className='user-block' key={e.id}>\n                        <div>{e.name} | {e.id}</div>\n                        <div align='center'>\n                            <Link to={`/profile/${e.id}`}>\n                                <img src={e.photos.large || userImage} alt='' width='60%' />\n                            </Link>\n                        </div>\n                        <div>{\n                            e.id === data.id\n                            ? <Link to='/profile' className='button'>Мой профиль</Link>\n                            : e.followed\n                            ? <button className='button' disabled={isDisabled.some(id => id === e.id)} onClick={() => dispatch(unfollow(e.id))}>Отписаться</button>\n                            : <button className='button' disabled={isDisabled.some(id => id === e.id)} onClick={() => dispatch(follow(e.id))}>Подписаться</button>\n                        }</div>\n                    </div>\n                ))\n            }</div>\n        }\n        </div>\n    )\n}\n\nexport default Users;"],"sourceRoot":""}